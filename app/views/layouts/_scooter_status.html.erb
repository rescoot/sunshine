<%= turbo_frame_tag dom_id(scooter, "status") do %>
  <div class="scooter-status">
    <h3><%= scooter.name %></h3>
    <div>
      <p>Status: <span id="<%= dom_id(scooter, "online_status") %>">
        <%= scooter.is_online? ? 'Online' : 'Offline' %>
      </span></p>
      <p>State: <span id="<%= dom_id(scooter, "state") %>"><%= scooter.state %></span></p>
      <p>Last seen: <span id="<%= dom_id(scooter, "last_seen") %>">
        <%= time_ago_in_words(scooter.last_seen_at) if scooter.last_seen_at %> ago
      </span></p>
    </div>
    
    <div>
      <p>Main Battery: <span id="<%= dom_id(scooter, "battery0") %>">
        <%= number_to_percentage(scooter.battery0_level, precision: 1) %>
      </span></p>
      <p>Second Battery: <span id="<%= dom_id(scooter, "battery1") %>">
        <%= number_to_percentage(scooter.battery1_level, precision: 1) %>
      </span></p>
      <p>Aux Battery: <span id="<%= dom_id(scooter, "aux_battery") %>">
        <%= number_to_percentage(scooter.aux_battery_level, precision: 1) %>
      </span></p>
      <p>CB Battery: <span id="<%= dom_id(scooter, "cbb_battery") %>">
        <%= number_to_percentage(scooter.cbb_battery_level, precision: 1) %>
      </span></p>
    </div>
    
    <div>
      <p>Kickstand: <span id="<%= dom_id(scooter, "kickstand") %>"><%= scooter.kickstand %></span></p>
      <p>Seatbox: <span id="<%= dom_id(scooter, "seatbox") %>"><%= scooter.seatbox %></span></p>
      <p>Blinkers: <span id="<%= dom_id(scooter, "blinkers") %>"><%= scooter.blinkers %></span></p>
    </div>

    <div class="controls" id="<%= dom_id(scooter, "controls") %>">
      <% if scooter.locked? %>
        <%= button_to 'Unlock', unlock_scooter_path(scooter), method: :post %>
      <% else %>
        <%= button_to 'Lock', lock_scooter_path(scooter), method: :post %>
      <% end %>
            
      <div class="blinker-controls">
        <%= button_to 'Left', blinkers_scooter_path(scooter, state: 'left'), method: :post,
            class: scooter.blinkers == 'left' ? 'active' : '' %>
        <%= button_to 'Right', blinkers_scooter_path(scooter, state: 'right'), method: :post,
            class: scooter.blinkers == 'right' ? 'active' : '' %>
        <%= button_to 'Both', blinkers_scooter_path(scooter, state: 'both'), method: :post,
            class: scooter.blinkers == 'both' ? 'active' : '' %>
        <%= button_to 'Off', blinkers_scooter_path(scooter, state: 'off'), method: :post,
            class: scooter.blinkers == 'off' ? 'active' : '' %>
      </div>
    </div>
  </div>
<% end %>